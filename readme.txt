1 用户注册系统


1.1目录结构设计

|
|--- public_files	保存可以公共访问的页面
		|
		|--- css
		|--- js
		|--- img
|
|--- lib			被其他文件调用的引用文件
|
|--- templates		模板文件夹


1.2数据库设计

-- 创建数据库
CREATE DATABASE USERREG;
USE USERREG;

-- 建立数据表
CREATE TABLE WROX_USER(
	USER_ID		INTEGER UNSIGNED	NOT NULL	AUTO_INCREMENT,
	USERNAME	VARCHAR(20)			NOT NULL,
	PASSWORD	CHAR(40)			NOT NULL,		-- sha1()
	EMAIL_ADDR	VARCHAR(100)		NOT NULL,
	IS_ACTIVE	TINYINT(1)			DEFAULT 0,

	PRIMARY KEY (USER_ID)
)ENGINE = MyISAM DEFAULT CHARACTER SET UTF8;

-- ALTER TABLE wrox RENAME wrox_user;	//更改表名

CREATE TABLE WROX_PENDING(
	USER_ID		INTEGER UNSIGNED 	NOT NULL,
	TOKEN		CHAR(10)			NOT NULL,
	CREATED_DATE	TIMESTAMP		DEFAULT CURRENT_TIMESTAMP,

	FOREIGN KEY (USER_ID)
		REFERENCES WROX_USER(USER_ID)
)ENGINE = MyISAM DEFAULT CHARACTER SET UTF8;


1.3编写共享代码

代码：\lib\common.php